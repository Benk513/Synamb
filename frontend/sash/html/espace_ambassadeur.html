

 <script>
    const token = localStorage.getItem("token");
    const role= localStorage.getItem("role")
    if (!token) {
      window.location.href = "/frontend/sash/html/login.html"; // Redirige vers login
    }


    // if(role ==="etudiant"){
    //     window.location.href = "/frontend/sash/html/espace_etudiant.html"; // Redirige vers login
    // }
    // if(role ==="ambassadeur"){window.location.href = "/frontend/sash/html/espace_ambassadeur.html"; }
  </script>  

<!doctype html>
<html lang="en" dir="ltr">

<head>

    <!-- META DATA -->
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sash – Bootstrap 5  Admin & Dashboard Template">
    <meta name="author" content="Spruko Technologies Private Limited">
    <meta name="keywords"
        content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit.">

    <!-- FAVICON -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/brand/favicon.ico">

    <!-- TITLE -->
    <title>Sash – Bootstrap 5 Admin & Dashboard Template </title>

    <!-- BOOTSTRAP CSS -->
    <link id="style" href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- STYLE CSS -->
     <link href="../assets/css/style.css" rel="stylesheet">

	<!-- Plugins CSS -->
    <link href="../assets/css/plugins.css" rel="stylesheet">

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet">

    <!-- INTERNAL Switcher css -->
    <link href="../assets/switcher/css/switcher.css" rel="stylesheet">
    <link href="../assets/switcher/demo.css" rel="stylesheet">

</head>

<body class="app sidebar-mini ltr light-mode">


    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
        <img src="../assets/images/loader.svg" class="loader-img" alt="Loader">
    </div>
    <!-- /GLOBAL-LOADER -->

    <!-- PAGE -->
    <div class="page">
        <div class="page-main">

            <!-- app-Header -->
            <div class="app-header header sticky">
                <div class="container-fluid main-container">
                    <div class="d-flex">
                        <a aria-label="Hide Sidebar" class="app-sidebar__toggle" data-bs-toggle="sidebar" href="javascript:void(0)"></a>
                        <!-- sidebar-toggle-->
                        <a class="logo-horizontal " href="index.html">
                            <img src="../assets/images/brand/logo-white.png" class="header-brand-img desktop-logo" alt="logo">
                            <img src="../assets/images/brand/logo-dark.png" class="header-brand-img light-logo1"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                       
                        <div class="d-flex order-lg-2 ms-auto header-right-icons">
                            <!-- SEARCH -->
                            <button class="navbar-toggler navresponsive-toggler d-lg-none ms-auto" type="button"
                                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent-4"
                                aria-controls="navbarSupportedContent-4" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon fe fe-more-vertical"></span>
                            </button>
                            <div class="navbar navbar-collapse responsive-navbar p-0">
                                <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                                    <div class="d-flex order-lg-2">
                                        <div class="dropdown d-lg-none d-flex">
                                            <a href="javascript:void(0)" class="nav-link icon" data-bs-toggle="dropdown">
                                                <i class="fe fe-search"></i>
                                            </a>
                                            <div class="dropdown-menu header-search dropdown-menu-start">
                                                <div class="input-group w-100 p-2">
                                                    <input type="text" class="form-control" placeholder="Search....">
                                                    <div class="input-group-text btn btn-primary">
                                                        <i class="fa fa-search" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                       
                                        <!-- COUNTRY -->
                                        <div class="d-flex">
                                            <a class="nav-link icon theme-layout nav-link-bg layout-setting">
                                                <span class="dark-layout"><i class="fe fe-moon"></i></span>
                                                <span class="light-layout"><i class="fe fe-sun"></i></span>
                                            </a>
                                        </div>
                                        <!-- Theme-Layout -->
                                        <div class="dropdown  d-flex shopping-cart">
                                             
                                          
                                        </div>
                                        <!-- CART -->
                                        <div class="dropdown d-flex">
                                            <a class="nav-link icon full-screen-link nav-link-bg">
                                                <i class="fe fe-minimize fullscreen-button"></i>
                                            </a>
                                        </div>
                                        <!-- FULL-SCREEN -->
                                         
                                        <!-- NOTIFICATIONS -->
                                        <div class="dropdown  d-flex message">
                                           
                                            
                                        </div>
                                        <!-- MESSAGE-BOX -->
                                        <div class="dropdown d-flex header-settings">
                                            <a href="javascript:void(0);" class="nav-link icon"
                                                data-bs-toggle="sidebar-right" data-target=".sidebar-right">
                                                <i class="fe fe-align-right"></i>
                                            </a>
                                        </div>
                                        <!-- SIDE-MENU -->
                                        <div class="dropdown d-flex profile-1">
                                            <a href="javascript:void(0)" data-bs-toggle="dropdown" class="nav-link leading-none d-flex">
                                                <img src="../assets/images/users/21.jpg" id="photo" alt="profile-user"
                                                    class="avatar  profile-user brround cover-image">
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                            
                                                <div class="dropdown-divider m-0"></div>
                                                <a class="dropdown-item" href="profile.html">
                                                    <i class="dropdown-icon fe fe-user"></i> Profile
                                                </a>
                                               
                                              
                                                <button class=" dropdown-item text-dark   btn"    ><i
                                                    class="side-menu__icon fa fa-sign-out "></i><span
                                                    class="side-menu__label" id="deconnexion">Se deconnecter</span> </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /app-Header -->

            <!--APP-SIDEBAR-->
            <div class="sticky">
                <div class="app-sidebar__overlay" data-bs-toggle="sidebar"></div>
                <div class="app-sidebar">
                    <div class="side-header">
                        <a class="header-brand1" href="index.html">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img desktop-logo img-fluid" alt="logo" style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img toggle-logo img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo img-fluid" alt="logo"  style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo1 img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                    </div>
                    <div class="main-sidemenu">
                        <div class="slide-left disabled" id="slide-left"><svg xmlns="http://www.w3.org/2000/svg"
                                fill="#7b8191" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" />
                            </svg></div>
                        <ul class="side-menu">
                            <li class="sub-category">
                                <h3>PRINCIPALE</h3>
                            </li>
                            <li class="slide">
                                <a class="side-menu__item has-link" data-bs-toggle="slide" href="index.html"> <span
                                        class="side-menu__label">Tableau de bord</span></a>
                            </li>
                            
                           
                           
                           
                            
                            <li class="sub-category">
                                <h3>Annonces</h3>
                            </li>

                              
                            <li>
                                <a class="side-menu__item has-link" href="annonces.html" >
                                 
                                    <span class="side-menu__label">Liste des annonces publiées</span></a>
                            </li>
                              
                          
                            <li>
                                <a class="side-menu__item has-link" href="creer-annonce.html"  >
                                 
                                    <span class="side-menu__label">Creer une annonce  </span></a>
                            </li>
                            
                            
                            
                            
                            
                            <li class="sub-category">
                                <h3>Demandes</h3>
                            </li>
                            
                            <li>
                                <a class="side-menu__item has-link" href="tableau-MesDemandes.html"  >
                                 
                                    <span class="side-menu__label">Liste des demandes  </span></a>
                            </li>
                            <li class="sub-category">
                                <h3>Mes etudiants</h3>
                            </li>
                            
                            <li>
                                <a class="side-menu__item has-link" href="tableau-MesEtudiants.html"  >
                                 
                                    <span class="side-menu__label">Liste des etudiants  </span></a>
                            </li>
                           
                            <li class="sub-category">
                                <h3>General</h3>
                            </li>
                            <li>
                                <button class=" text-dark   btn"    > <span
                                        class="side-menu__label" id="deconnexion">Se deconnecter</span> </button>
                            </li>
                          
                            
                          
                        </ul>
                        <div class="slide-right" id="slide-right"><svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191"
                                width="24" height="24" viewBox="0 0 24 24">
                                <path d="M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z" />
                            </svg></div>
                    </div>
                </div>
            </div>
            <!--/APP-SIDEBAR-->

            <!--app-content open-->
            <div class="main-content app-content mt-0">
                <div class="side-app">

                    <!-- CONTAINER -->
                    <div class="main-container container-fluid">

                        <!-- PAGE-HEADER -->
                        <div class="page-header">
                            <h1 class="page-title">Tableau de bord</h1>
                            <div>
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Tableau de bord</li>
                                </ol>
                            </div>
                        </div>
                        <!-- PAGE-HEADER END -->

                        <!-- ROW-1 -->
                        <div class="row">


                          











                            <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">






                                <div class="alert alert-info alert-dismissible fade show mb-0" role="alert" id="showAmbassadeurInfoToCreateAmbassy">
                                    <span class="alert-inner--icon"><i class="fe fe-slash"></i></span>
                                    <span class="alert-inner--text"><strong>Vous devez attacher une ambassade avant de faire une autre action!</strong> </span>
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                </div>






                                <div class="row" id="statsCards">
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Etudiants totales</h6>
                                                        <h2 class="mb-0 number-font" id="totalEtudiants">-</h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                         
                                                    </div>
                                                </div>
                                               
                                            </div>
                                        </div>
                                    </div>
                            
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Annonces Publiées</h6>
                                                        <h2 class="mb-0 number-font" id="totalAnnonces">-</h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                             
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Demandes Traités</h6>
                                                        <h2 class="mb-0 number-font"  id="demandesTraitees">-</h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                            <canvas id="costchart"
                                                                class="h-8 w-9 chart-dropshadow"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                              
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ROW-1 END -->

                        <!-- ROW-2 -->
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <div class="row">


                               
                                <div class="col-xl-4 col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Gerer mon Ambassade</h5>
                                            <p class="card-text">Ajouter, et consulter son ambassade.</p>
                                            <a href="creer_ambassade.html" class="btn btn-primary">Gerer</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-md-6 ambassadeursActions">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Gerer mes etudiants</h5>
                                            <p class="card-text">Valider ou rejeter les demandes d'inscription.</p>

                                            <a href="tableau-MesEtudiants.html" class="btn btn-primary">Gerer</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-md-6 ambassadeursActions">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Gerer mes annonces</h5>
                                            <p class="card-text">Creer, supprimer, lister et mettre a jour.</p>
                                            <a href="tableau-annonces.html" class="btn btn-primary">Gerer</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-md-6 ambassadeursActions">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Gerer mes demandes</h5>
                                            <p class="card-text">Valider ou rejeter les demandes d'accompagnement.</p>
                                            <a href="tableau-MesDemandes.html" class="btn btn-primary">Gerer</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                                <!-- <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Sales Analytics</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex mx-auto text-center justify-content-center mb-4">
                                            <div class="d-flex text-center justify-content-center me-3"><span
                                                    class="dot-label bg-primary my-auto"></span>Total Sales</div>
                                            <div class="d-flex text-center justify-content-center"><span
                                                    class="dot-label bg-secondary my-auto"></span>Total Orders</div>
                                        </div>
                                        <div class="chartjs-wrapper-demo">
                                            <canvas id="transactions" class="chart-dropshadow"></canvas>
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                           
                        </div>
                        
                    </div>
                    <!-- CONTAINER END -->
                </div>
            </div>
            <!--app-content close-->

        </div>

        <!-- Sidebar-right -->
     
        <!-- FOOTER END -->

    <!-- BACK-TO-TOP -->
    <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

    <!-- JQUERY JS -->
    <script src="../assets/js/jquery.min.js"> </script>

    <!-- BOOTSTRAP JS -->
    <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
    <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- SPARKLINE JS-->
    <script src="../assets/js/jquery.sparkline.min.js"></script>

    <!-- Sticky js -->
    <script src="../assets/js/sticky.js"></script>

    <!-- CHART-CIRCLE JS-->
    <script src="../assets/js/circle-progress.min.js"></script>

    <!-- PIETY CHART JS-->
    <script src="../assets/plugins/peitychart/jquery.peity.min.js"></script>
    <script src="../assets/plugins/peitychart/peitychart.init.js"></script>

    <!-- SIDEBAR JS -->
    <script src="../assets/plugins/sidebar/sidebar.js"></script>

    <!-- Perfect SCROLLBAR JS-->
    <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll-1.js"></script>

    <!-- INTERNAL CHARTJS CHART JS-->
    <script src="../assets/plugins/chart/Chart.bundle.js"></script>
    <script src="../assets/plugins/chart/utils.js"></script>

    <!-- INTERNAL SELECT2 JS -->
    <script src="../assets/plugins/select2/select2.full.min.js"></script>

    <!-- INTERNAL Data tables js-->
    <script src="../assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
    <script src="../assets/plugins/datatable/js/dataTables.bootstrap5.js"></script>
    <script src="../assets/plugins/datatable/dataTables.responsive.min.js"></script>

    <!-- INTERNAL APEXCHART JS -->
    <script src="../assets/js/apexcharts.js"></script>
    <script src="../assets/plugins/apexchart/irregular-data-series.js"></script>

    <!-- INTERNAL Flot JS -->
    <script src="../assets/plugins/flot/jquery.flot.js"></script>
    <script src="../assets/plugins/flot/jquery.flot.fillbetween.js"></script>
    <script src="../assets/plugins/flot/chart.flot.sampledata.js"></script>
    <script src="../assets/plugins/flot/dashboard.sampledata.js"></script>

    <!-- INTERNAL Vector js -->
    <script src="../assets/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
    <script src="../assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

    <!-- SIDE-MENU JS-->
    <script src="../assets/plugins/sidemenu/sidemenu.js"></script>

	<!-- TypeHead js -->
	<script src="../assets/plugins/bootstrap5-typehead/autocomplete.js"></script>
    <script src="../assets/js/typehead.js"></script>

    <!-- INTERNAL INDEX JS -->
    <script src="../assets/js/index1.js"></script>

    <!-- Color Theme js -->
    <script src="../assets/js/themeColors.js"></script>

    <!-- CUSTOM JS -->
    <script src="../assets/js/custom.js"></script>

    <!-- Custom-switcher -->
    <script src="../assets/js/custom-swicher.js"></script>

    <!-- Switcher js -->
    <script src="../assets/switcher/js/switcher.js"></script>
   

        <script>

$("#deconnexion").click(function () {
  alert("À bientôt !");
  localStorage.clear();
  window.location.href = "login.html";
});

      
$(document).ready(function () {
            // Charger les données du profil

            const userProfileUrl = "http://localhost:5001/uploads/utilisateurs/";

        $.ajax({
          url: "http://localhost:5001/api/utilisateurs/monProfil",
          method: "GET",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("token"),
          },
          success: function (user) {
              const profileUrl = userProfileUrl + user?.data.photo;
            console.log(user?.data.nom)
            $("#nom").text(user?.data?.nom);
            $("#email").text(user?.data.email);
            $("#lipasa").text(user?.data.lipasa || "Non renseigné.");
            $("#photo").attr("src", profileUrl);
            $("#pays").text(user?.data.pays || "Non renseigné.");
            $("#dateNaissance").text(user?.data.dateNaissance || "Non renseigné.");
            $("#biographie").text(user?.data.biographie || "Aucune biographie fournie.");
            $("#adresse").text(user?.data.adresse || "Non renseigné.");
            $("#codePays").val(user?.data.codePays || "Non renseigné.");
            $("#telephone").text(user?.data.telephone || "Non renseignné.");
            $("#role").text(user?.data.role || "Non renseignné.");


                 // Affichage conditionnel
      if (user?.data.role === "admin") {
        $("#info-administrative").hide();     // Masquer mot de passe
        $("#info-academique").hide();     // Masquer mot de passe
        $("#saveBtn").hide();         // Masquer bouton "Enregistrer"
      }
          },
          error: function () {
              alert("Erreur lors du chargement du profil !");
                    }
                });
            });
        </script>



<script>
     
  
    $.ajax({
      url: "http://localhost:5001/api/ambassades/statistiques/ambassadeur",
      method: "GET",
      headers: {
        Authorization: "Bearer " + token
      },
      success: function (res) {
          $("#showAmbassadeurInfoToCreateAmbassy").hide();
        const stats = res.data;
        $("#totalEtudiants").text(stats.totalEtudiants);
        $("#totalAnnonces").text(stats.totalAnnonces);
        $("#demandesTraitees").text(stats.demandesTraitees);



                 // Affichage conditionnel
                 if (stats.totalEtudiants === 0) {
        $("#statsCards").hide(); }    // Masquer mot de passe
         
        
      },
      error: function (err) {
        console.error("Erreur lors de la récupération des statistiques :", err);
        $("#statsCards").hide();
        $(".ambassadeursActions").hide();
        $("#showAmbassadeurInfoToCreateAmbassy").show();
      }
    });
  </script>
  
</body>

</html>
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- META DATA -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Sash – Bootstrap 5  Admin & Dashboard Template"
    />
    <meta name="author" content="Spruko Technologies Private Limited" />
    <meta
      name="keywords"
      content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit."
    />

    <!-- FAVICON -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../assets/images/brand/favicon.ico"
    />

    <!-- TITLE -->
    <title>Sash – Bootstrap 5 Admin & Dashboard Template</title>

    <!-- BOOTSTRAP CSS -->
    <link
      id="style"
      href="../assets/plugins/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- STYLE CSS -->
    <link href="../assets/css/style.css" rel="stylesheet" />

    <!-- Plugins CSS -->
    <link href="../assets/css/plugins.css" rel="stylesheet" />

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet" />

    <!-- INTERNAL Switcher css -->
    <link href="../assets/switcher/css/switcher.css" rel="stylesheet" />
    <link href="../assets/switcher/demo.css" rel="stylesheet" />
  </head>

  <body class="app sidebar-mini ltr login-img">
    <!-- BACKGROUND-IMAGE -->
    <div class="">
      <!-- GLOABAL LOADER -->
      <div id="global-loader">
        <img
          src="../assets/images/loader.svg"
          class="loader-img"
          alt="Loader"
        />
      </div>
      <!-- /GLOABAL LOADER -->

      <!-- PAGE -->
      <div class="page">
        <div class="">
          <!-- Theme-Layout -->

          <!-- CONTAINER OPEN -->
          <div class="col col-login mx-auto mt-7">
            <div class="text-center">
              <a href="index.html"
              ><img
                src="../assets/images/brand/synamb.png"
                class="header-brand-img"                  
                style="max-width:10%; height: auto;"
            /></a>
            </div>
          </div>
          <div class="container-login100">
            <div class="wrap-login100 p-8">
              <form class="login100-form validate-form" id="inscriptionForm">
                <span class="login100-form-title"> Inscription </span>

                <div class="d-flex" id="message"></div>

                <div
                  class="wrap-input100 validate-input input-group"
                  data-bs-validate="Valid email is required: ex@abc.xyz"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="mdi mdi-account" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="nom"
                    type="text"
                    placeholder="Nom et Prénom"
                  />
                </div>

                <div
                  class="wrap-input100 validate-input input-group"
                  data-bs-validate="Valid email est est requis: ex@abc.xyz"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="zmdi zmdi-email" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="email"
                    type="email"
                    placeholder="Adresse email"
                  />
                </div>

                <!--  mot de passe -->
                <div
                  class="wrap-input100 validate-input input-group"
                  id="Password-toggle"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="zmdi zmdi-eye" aria-hidden="true"></i>
                  </a>

                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="motDePasse"
                    type="password"
                    placeholder="Mot de passe"
                  />
                </div>

                <!--  confirmation mot de passe -->
                <div
                  class="wrap-input100 validate-input input-group"
                  id="Password-toggle"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="zmdi zmdi-eye" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="confirmationMotDePasse"
                    type="password"
                    placeholder="Confirmation mot de passe"
                  />
                </div>

                <!--  numero de passeport -->
                <div
                  class="wrap-input100 validate-input input-group"
                  id="Password-toggle"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="fa fa-shield" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="lipasa"
                    type="text"
                    placeholder="Numero de passeport"
                  />
                </div>
                <!--  numero de passeport -->
                <div
                  class="wrap-input100 validate-input input-group"
                  id="Password-toggle"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="fa fa-flag" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="pays"
                    type="text"
                    placeholder="Pays"
                  />
                </div>

                <div
                  class="wrap-input100 validate-input input-group"
                  id="Password-toggle"
                >
                  <a
                    href="javascript:void(0)"
                    class="input-group-text bg-white text-muted"
                  >
                    <i class="fa fa-hashtag" aria-hidden="true"></i>
                  </a>
                  <input
                    class="input100 border-start-0 ms-0 form-control"
                    id="codePays"
                    type="text"
                    placeholder="Code du pays ex: CD"
                  />
                </div>

                <!-- <label class="custom-control custom-checkbox mt-4">
									<input type="checkbox" class="custom-control-input">
									<span class="custom-control-label">Agree the <a href="terms.html">terms and policy</a></span>
								</label> -->
                <div class="container-login100-form-btn">
                  <button class="btn btn-primary my-1" type="submit">
                    <!-- <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> -->
                    S'inscrire
                  </button>
                </div>
                <div class="text-center pt-3">
                  <p class="text-dark mb-0 d-inline-flex">
                    Vous avez deja un compte?<a
                      href="login.html"
                      class="text-primary ms-1"
                      >Se connecter</a
                    >
                  </p>
                </div>
                <!-- <label class="login-social-icon"><span>Register with Social</span></label>
                            <div class="d-flex justify-content-center">
                                <a href="javascript:void(0)">
                                    <div class="social-login me-4 text-center">
                                        <i class="fa fa-google"></i>
                                    </div>
                                </a>
                                <a href="javascript:void(0)">
                                    <div class="social-login me-4 text-center">
                                        <i class="fa fa-facebook"></i>
                                    </div>
                                </a>
                                <a href="javascript:void(0)">
                                    <div class="social-login text-center">
                                        <i class="fa fa-twitter"></i>
                                    </div>
                                </a>
                            </div> -->
              </form>
            </div>
          </div>
          <!-- CONTAINER CLOSED -->
        </div>
      </div>
      <!-- END PAGE -->
    </div>
    <!-- BACKGROUND-IMAGE CLOSED -->

    <!-- JQUERY JS -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- BOOTSTRAP JS -->
    <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
    <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- SHOW PASSWORD JS -->
    <script src="../assets/js/show-password.min.js"></script>

    <!-- Perfect SCROLLBAR JS-->
    <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>

    <!-- Color Theme js -->
    <script src="../assets/js/themeColors.js"></script>

    <!-- CUSTOM JS -->
    <script src="../assets/js/custom.js"></script>

    <!-- Custom-switcher -->
    <script src="../assets/js/custom-swicher.js"></script>

    <!-- Switcher js -->
    <script src="../assets/switcher/js/switcher.js"></script>

    <script>
      $("#inscriptionForm").submit(function (e) {
        e.preventDefault();

        $("#spinner").show(); // 👉 Affiche le spinner
        $("#message").html(""); // Vide les messages

        const data = {
          nom: $("#nom").val(),
          email: $("#email").val(),
          motDePasse: $("#motDePasse").val(),
          confirmationMotDePasse: $("#confirmationMotDePasse").val(),
          lipasa: $("#lipasa").val(),
          pays: $("#pays").val(),
          codePays: $("#codePays").val(),
        };

        $.ajax({
          url: "http://localhost:5001/api/utilisateurs/inscription",
          method: "POST",
          contentType: "application/json",
          data: JSON.stringify(data),
          success: function (res) {
            $("#spinner").hide();
            $("#message")
              .html(` <div class="alert alert-success alert-dismissible fade show" role="alert">
                                        <span class="alert-inner--icon"><i class="fe fe-thumbs-up"></i></span>
                                        <span class="alert-inner--text"><strong>Succes!</strong>Felicitations! vous etes inscrit</span>
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                                <span aria-hidden="true">×</span>
                                            </button>
                                    </div>`);
            setTimeout(() => {
              window.location.href = "login.html"; // 🔁 redirection après 2s
            }, 2000);
          },
          error: function (xhr) {
            $("#spinner").hide();
            const msg = xhr.responseJSON?.message || "Une erreur est survenue";
            $("#message")
              .html(` <div class="alert alert-danger alert-dismissible fade show mb-0" role="alert">
                                                    <span class="alert-inner--icon"><i class="fe fe-slash"></i></span>
                                                    <span class="alert-inner--text"><strong>Erreur!</strong> ${msg}!</span>
                                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                                            <span aria-hidden="true">×</span>
                                                        </button>
                                                </div>`);
          },
        });
      });
    </script>
  </body>
</html>

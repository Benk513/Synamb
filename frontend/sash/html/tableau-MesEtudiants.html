<script>
  const token= localStorage.getItem("token")
  const role= localStorage.getItem("role")
  if (!token) {
    window.location.href = "/frontend/sash/html/login.html"; // Redirige vers login
  }

</script>
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- META DATA -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Sash – Bootstrap 5  Admin & Dashboard Template"
    />
    <meta name="author" content="Spruko Technologies Private Limited" />
    <meta
      name="keywords"
      content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit."
    />

    <!-- FAVICON -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../assets/images/brand/favicon.ico"
    />

    <!-- TITLE -->
    <title>Sash – Bootstrap 5 Admin & Dashboard Template</title>

    <!-- BOOTSTRAP CSS -->
    <link
      id="style"
      href="../assets/plugins/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- STYLE CSS -->
    <link href="../assets/css/style.css" rel="stylesheet" />

    <!-- Plugins CSS -->
    <link href="../assets/css/plugins.css" rel="stylesheet" />

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet" />

    <!-- INTERNAL Switcher css -->
    <link href="../assets/switcher/css/switcher.css" rel="stylesheet" />
    <link href="../assets/switcher/demo.css" rel="stylesheet" />
  </head>

  <body class="app sidebar-mini ltr light-mode">
    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
      <img src="../assets/images/loader.svg" class="loader-img" alt="Loader" />
    </div>
    <!-- /GLOBAL-LOADER -->

    <!-- PAGE -->
    <div class="page">
      <div class="page-main">
        <!-- app-Header -->
        <div class="app-header header sticky">
          <div class="container-fluid main-container">
            <div class="d-flex">
              <a
                aria-label="Hide Sidebar"
                class="app-sidebar__toggle"
                data-bs-toggle="sidebar"
                href="javascript:void(0)"
              ></a>
              <!-- sidebar-toggle-->
              <a class="logo-horizontal" href="index.html">
                <img
                  src="../assets/images/brand/logo-white.png"
                  class="header-brand-img desktop-logo"
                  alt="logo"
                />
                <img
                  src="../assets/images/brand/logo-dark.png"
                  class="header-brand-img light-logo1"
                  alt="logo"
                />
              </a>
              <!-- LOGO -->
              <div class="main-header-center ms-3 d-none d-lg-block">
                <input
                  type="text"
                  class="form-control"
                  id="typehead"
                  placeholder="Search for results..."
                />
                <button class="btn px-0 pt-2">
                  <i class="fe fe-search" aria-hidden="true"></i>
                </button>
              </div>
              <div class="d-flex order-lg-2 ms-auto header-right-icons">
                <!-- SEARCH -->
                <button
                  class="navbar-toggler navresponsive-toggler d-lg-none ms-auto"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#navbarSupportedContent-4"
                  aria-controls="navbarSupportedContent-4"
                  aria-expanded="false"
                  aria-label="Toggle navigation"
                >
                  <span class="navbar-toggler-icon fe fe-more-vertical"></span>
                </button>
                <div class="navbar navbar-collapse responsive-navbar p-0">
                  <div
                    class="collapse navbar-collapse"
                    id="navbarSupportedContent-4"
                  >
                    <div class="d-flex order-lg-2">
                      <div class="dropdown d-lg-none d-flex">
                        <a
                          href="javascript:void(0)"
                          class="nav-link icon"
                          data-bs-toggle="dropdown"
                        >
                          <i class="fe fe-search"></i>
                        </a>
                        <div
                          class="dropdown-menu header-search dropdown-menu-start"
                        >
                          <div class="input-group w-100 p-2">
                            <input
                              type="text"
                              class="form-control"
                              placeholder="Search...."
                            />
                            <div class="input-group-text btn btn-primary">
                              <i class="fa fa-search" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex country">
                        <a
                          class="nav-link icon text-center"
                          data-bs-target="#country-selector"
                          data-bs-toggle="modal"
                        >
                          <i class="fe fe-globe"></i
                          ><span class="fs-16 ms-2 d-none d-xl-block"
                            >English</span
                          >
                        </a>
                      </div>
                      <!-- COUNTRY -->
                      <div class="d-flex">
                        <a
                          class="nav-link icon theme-layout nav-link-bg layout-setting"
                        >
                          <span class="dark-layout"
                            ><i class="fe fe-moon"></i
                          ></span>
                          <span class="light-layout"
                            ><i class="fe fe-sun"></i
                          ></span>
                        </a>
                      </div>
                      <!-- Theme-Layout -->
                      <div class="dropdown d-flex shopping-cart">
                        <a
                          class="nav-link icon text-center"
                          data-bs-toggle="dropdown"
                        >
                          <i class="fe fe-shopping-cart"></i
                          ><span class="badge bg-secondary header-badge"
                            >4</span
                          >
                        </a>
                        <div
                          class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                        >
                          <div class="drop-heading border-bottom">
                            <div class="d-flex">
                              <h6 class="mt-1 mb-0 fs-16 fw-semibold text-dark">
                                My Shopping Cart
                              </h6>
                              <div class="ms-auto">
                                <span
                                  class="badge bg-danger-transparent header-badge text-danger fs-14"
                                  >Hurry Up!</span
                                >
                              </div>
                            </div>
                          </div>
                          <div class="header-dropdown-list message-menu">
                            <div class="dropdown-item d-flex p-4">
                              <a href="cart.html" class="open-file"></a>
                              <span
                                class="avatar avatar-xl br-5 me-3 align-self-center cover-image"
                                data-bs-image-src="../assets/images/products/3.jpg"
                              ></span>
                              <div class="wd-50p">
                                <h5 class="mb-1">Flower Pot for Home Decor</h5>
                                <span
                                  >Status:
                                  <span class="text-success"
                                    >In Stock</span
                                  ></span
                                >
                                <p class="fs-13 text-muted mb-0">
                                  Quantity: 01
                                </p>
                              </div>
                              <div class="ms-auto text-end d-flex fs-16">
                                <span
                                  class="fs-16 text-dark d-none d-sm-block px-4"
                                >
                                  $438
                                </span>
                                <a
                                  href="javascript:void(0)"
                                  class="fs-16 btn p-0 cart-trash"
                                >
                                  <i
                                    class="fe fe-trash-2 border text-danger brround d-block p-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                            <div class="dropdown-item d-flex p-4">
                              <a href="cart.html" class="open-file"></a>
                              <span
                                class="avatar avatar-xl br-5 me-3 align-self-center cover-image"
                                data-bs-image-src="../assets/images/products/5.jpg"
                              ></span>
                              <div class="wd-50p">
                                <h5 class="mb-1">Black Digital Camera</h5>
                                <span
                                  >Status:
                                  <span class="text-danger"
                                    >Out Stock</span
                                  ></span
                                >
                                <p class="fs-13 text-muted mb-0">
                                  Quantity: 06
                                </p>
                              </div>
                              <div class="ms-auto text-end d-flex">
                                <span
                                  class="fs-16 text-dark d-none d-sm-block px-4"
                                >
                                  $867
                                </span>
                                <a
                                  href="javascript:void(0)"
                                  class="fs-16 btn p-0 cart-trash"
                                >
                                  <i
                                    class="fe fe-trash-2 border text-danger brround d-block p-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                            <div class="dropdown-item d-flex p-4">
                              <a href="cart.html" class="open-file"></a>
                              <span
                                class="avatar avatar-xl br-5 me-3 align-self-center cover-image"
                                data-bs-image-src="../assets/images/products/7.jpg"
                              ></span>
                              <div class="wd-50p">
                                <h5 class="mb-1">
                                  Stylish Rockerz 255 Ear Pods
                                </h5>
                                <span
                                  >Status:
                                  <span class="text-success"
                                    >In Stock</span
                                  ></span
                                >
                                <p class="fs-13 text-muted mb-0">
                                  Quantity: 05
                                </p>
                              </div>
                              <div class="ms-auto text-end d-flex">
                                <span
                                  class="fs-16 text-dark d-none d-sm-block px-4"
                                >
                                  $323
                                </span>
                                <a
                                  href="javascript:void(0)"
                                  class="fs-16 btn p-0 cart-trash"
                                >
                                  <i
                                    class="fe fe-trash-2 border text-danger brround d-block p-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                            <div class="dropdown-item d-flex p-4">
                              <a href="cart.html" class="open-file"></a>
                              <span
                                class="avatar avatar-xl br-5 me-3 align-self-center cover-image"
                                data-bs-image-src="../assets/images/products/1.jpg"
                              ></span>
                              <div class="wd-50p">
                                <h5 class="mb-1">Women Party Wear Dress</h5>
                                <span
                                  >Status:
                                  <span class="text-success"
                                    >In Stock</span
                                  ></span
                                >
                                <p class="fs-13 text-muted mb-0">
                                  Quantity: 05
                                </p>
                              </div>
                              <div class="ms-auto text-end d-flex">
                                <span
                                  class="fs-16 text-dark d-none d-sm-block px-4"
                                >
                                  $867
                                </span>
                                <a
                                  href="javascript:void(0)"
                                  class="fs-16 btn p-0 cart-trash"
                                >
                                  <i
                                    class="fe fe-trash-2 border text-danger brround d-block p-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                            <div class="dropdown-item d-flex p-4">
                              <a href="cart.html" class="open-file"></a>
                              <span
                                class="avatar avatar-xl br-5 me-3 align-self-center cover-image"
                                data-bs-image-src="../assets/images/products/2.jpg"
                              ></span>
                              <div class="wd-50p">
                                <h5 class="mb-1">Running Shoes for men</h5>
                                <span
                                  >Status:
                                  <span class="text-success"
                                    >In Stock</span
                                  ></span
                                >
                                <p class="fs-13 text-muted mb-0">
                                  Quantity: 05
                                </p>
                              </div>
                              <div class="ms-auto text-end d-flex">
                                <span
                                  class="fs-16 text-dark d-none d-sm-block px-4"
                                >
                                  $456
                                </span>
                                <a
                                  href="javascript:void(0)"
                                  class="fs-16 btn p-0 cart-trash"
                                >
                                  <i
                                    class="fe fe-trash-2 border text-danger brround d-block p-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                          </div>
                          <div class="dropdown-divider m-0"></div>
                          <div class="dropdown-footer">
                            <a
                              class="btn btn-primary btn-pill w-sm btn-sm py-2"
                              href="checkout.html"
                              ><i class="fe fe-check-circle"></i> Checkout</a
                            >
                            <span class="float-end p-2 fs-17 fw-semibold"
                              >Total: $6789</span
                            >
                          </div>
                        </div>
                      </div>
                      <!-- CART -->
                      <div class="dropdown d-flex">
                        <a class="nav-link icon full-screen-link nav-link-bg">
                          <i class="fe fe-minimize fullscreen-button"></i>
                        </a>
                      </div>
                      <!-- FULL-SCREEN -->
                      <div class="dropdown d-flex notifications">
                        <a class="nav-link icon" data-bs-toggle="dropdown"
                          ><i class="fe fe-bell"></i><span class="pulse"></span>
                        </a>
                     
                      </div>
                  
                    
                      <!-- SIDE-MENU -->
                      <div class="dropdown d-flex profile-1">
                        <a
                          href="javascript:void(0)"
                          data-bs-toggle="dropdown"
                          class="nav-link leading-none d-flex"
                        >
                          <img
                            src="../assets/images/users/21.jpg"
                            alt="profile-user"
                            class="avatar profile-user brround cover-image"
                          />
                        </a>
                        <div
                          class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                        >
                          <div class="drop-heading">
                            <div class="text-center">
                              <h5 class="text-dark mb-0 fs-14 fw-semibold">
                                Percy Kewshun
                              </h5>
                              <small class="text-muted">Senior Admin</small>
                            </div>
                          </div>
                          <div class="dropdown-divider m-0"></div>
                          <a class="dropdown-item" href="profile.html">
                            <i class="dropdown-icon fe fe-user"></i> Profile
                          </a>
                          <a class="dropdown-item" href="email-inbox.html">
                            <i class="dropdown-icon fe fe-mail"></i> Inbox
                            <span class="badge bg-danger rounded-pill float-end"
                              >5</span
                            >
                          </a>
                          <a class="dropdown-item" href="lockscreen.html">
                            <i class="dropdown-icon fe fe-lock"></i> Lockscreen
                          </a>
                          <a class="dropdown-item" href="login.html">
                            <i class="dropdown-icon fe fe-alert-circle"></i>
                            Sign out
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /app-Header -->

        <!--APP-SIDEBAR-->
        <div class="sticky">
          <div class="app-sidebar__overlay" data-bs-toggle="sidebar"></div>
          <div class="app-sidebar">
            <div class="side-header">
              <a class="header-brand1" href="index.html">
                <img
                  src="../assets/images/brand/logo-white.png"
                  class="header-brand-img desktop-logo"
                  alt="logo"
                />
                <img
                  src="../assets/images/brand/icon-white.png"
                  class="header-brand-img toggle-logo"
                  alt="logo"
                />
                <img
                  src="../assets/images/brand/icon-dark.png"
                  class="header-brand-img light-logo"
                  alt="logo"
                />
                <img
                  src="../assets/images/brand/logo-dark.png"
                  class="header-brand-img light-logo1"
                  alt="logo"
                />
              </a>
              <!-- LOGO -->
            </div>
            <div class="main-sidemenu">
              <div class="slide-left disabled" id="slide-left"><svg xmlns="http://www.w3.org/2000/svg"
                      fill="#7b8191" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" />
                  </svg></div>
              <ul class="side-menu">
                  <li class="sub-category">
                      <h3>PRINCIPALE</h3>
                  </li>
                  <li class="slide">
                      <a class="side-menu__item has-link" data-bs-toggle="slide" href="index.html"> <span
                              class="side-menu__label">Tableau de bord</span></a>
                  </li>
                  
                 
                 
                 
                  
                  <li class="sub-category">
                      <h3>Annonces</h3>
                  </li>

                    
                  <li>
                      <a class="side-menu__item has-link" href="annonces.html" >
                       
                          <span class="side-menu__label">Liste des annonces publiées</span></a>
                  </li>
                    
                
                  <li>
                      <a class="side-menu__item has-link" href="creer-annonce.html"  >
                       
                          <span class="side-menu__label">Creer une annonce  </span></a>
                  </li>
                  
                  
                  
                  
                  
                  <li class="sub-category">
                      <h3>Demandes</h3>
                  </li>
                  
                  <li>
                      <a class="side-menu__item has-link" href="tableau-MesDemandes.html"  >
                       
                          <span class="side-menu__label">Liste des demandes  </span></a>
                  </li>
                  <li class="sub-category">
                      <h3>Mes etudiants</h3>
                  </li>
                  
                  <li>
                      <a class="side-menu__item has-link" href="tableau-MesEtudiants.html"  >
                       
                          <span class="side-menu__label">Liste des etudiants  </span></a>
                  </li>
                 
                  <li class="sub-category">
                      <h3>General</h3>
                  </li>
                  <li>
                      <button class=" text-dark   btn"    > <span
                              class="side-menu__label" id="deconnexion">Se deconnecter</span> </button>
                  </li>
                
                  
                
              </ul>
              <div class="slide-right" id="slide-right"><svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191"
                      width="24" height="24" viewBox="0 0 24 24">
                      <path d="M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z" />
                  </svg></div>
          </div>
          </div>
        </div>
        <!--/APP-SIDEBAR-->

        <!--app-content open-->
        <div class="main-content app-content mt-0">
          <div class="side-app">
            <!-- CONTAINER -->
            <div class="main-container container-fluid">
              <!-- PAGE-HEADER -->
              <div class="page-header">
                <h1 class="page-title">Liste des etudiants</h1>
                <div>
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="javascript:void(0)">Annonces</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Liste
                    </li>
                  </ol>
                </div>
              </div>
              <!-- PAGE-HEADER END -->

              <!-- End Row -->
              <!-- Row -->
              <div class="row row-sm">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header d-flex justify-content-between">
                      <h3 class="card-title" id="resultats">
                         
                      </h3>
                      
                    </div>

                    <div class="card-body">
                      <div class="table-responsive">
                        <table
                          class="table table-bordered border text-nowrap mb-0"
                          id="removecolumns-edit"
                        >
                          <thead>
                            <tr>
                              <th>N°</th>
                              <th>Nom et Prenom</th>
                              <th>Email</th>
                              <th>Status</th>
                              <th>Telephone</th>
                              <th>Date de D'inscription</th>
                              <th>Actions</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- End Row -->
             
            </div>
            <!-- CONTAINER CLOSED -->
          <div class="side-app">
            <!-- CONTAINER -->
            <div class="main-container container-fluid">
              <!-- PAGE-HEADER -->
              <div class="page-header">
                <h1 class="page-title">Liste des etudiants refusé </h1>
                <div>
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="javascript:void(0)">Annonces</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Liste
                    </li>
                  </ol>
                </div>
              </div>
              <!-- PAGE-HEADER END -->

              <!-- End Row -->
              <!-- Row -->
              <div class="row row-sm">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header d-flex justify-content-between">
                      <h3 class="card-title" id="resultatsEtudiantsRejete">
                         
                      </h3>
                      
                    </div>

                    <div class="card-body">
                      <div class="table-responsive">
                        <table
                          class="table table-bordered border text-nowrap mb-0"
                          id="etudiantRejeteTable"
                        >
                          <thead>
                            <tr>
                              <th>N°</th>
                              <th>Nom et Prenom</th>
                              <th>Email</th>
                              <th>Status</th>
                              <th>Telephone</th>
                              <th>Date de D'inscription</th>
                        
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                              <td>...</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- End Row -->
             
            </div>
            <!-- CONTAINER CLOSED -->
          </div>
        </div>
        <!--app-content closed-->
      </div>

      <!-- Sidebar-right -->
      <div class="sidebar sidebar-right sidebar-animate">
        <div class="panel panel-primary card mb-0 shadow-none border-0">
          <div class="tab-menu-heading border-0 d-flex p-3">
            <div class="card-title mb-0">
              <i class="fe fe-bell me-2"></i
              ><span class="pulse"></span>Notifications
            </div>
            <div class="card-options ms-auto">
              <a
                href="javascript:void(0);"
                class="sidebar-icon text-end float-end me-3 mb-1"
                data-bs-toggle="sidebar-right"
                data-target=".sidebar-right"
                ><i class="fe fe-x text-white"></i
              ></a>
            </div>
          </div>
          <div class="panel-body tabs-menu-body latest-tasks p-0 border-0">
            <div class="tabs-menu border-bottom">
              <!-- Tabs -->
        
            </div>
           
          </div>
        </div>
      </div>
      <!--/Sidebar-right-->

     

      <!-- FOOTER -->
      <footer class="footer">
        <div class="container">
          <div class="row align-items-center flex-row-reverse">
            <div class="col-md-12 col-sm-12 text-center">
              Copyright © <span id="year"></span>
              <a href="javascript:void(0)">Sash</a>. Designed with
              <span class="fa fa-heart text-danger"></span> by
              <a href="javascript:void(0)"> Spruko </a> All rights reserved.
            </div>
          </div>
        </div>
      </footer>
      <!-- FOOTER CLOSED -->
    </div>

    <!-- BACK-TO-TOP -->
    <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

    <!-- JQUERY JS -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- BOOTSTRAP JS -->
    <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
    <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- INPUT MASK JS-->
    <script src="../assets/plugins/input-mask/jquery.mask.min.js"></script>

    <!-- TypeHead js -->
    <script src="../assets/plugins/bootstrap5-typehead/autocomplete.js"></script>
    <script src="../assets/js/typehead.js"></script>

    <!-- INTERNAL SELECT2 JS -->
    <script src="../assets/plugins/select2/select2.full.min.js"></script>

    <!-- DATA TABLE JS-->
    <script src="../assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
    <script src="../assets/plugins/datatable/js/dataTables.bootstrap5.js"></script>
    <script src="../assets/plugins/datatable/js/dataTables.buttons.min.js"></script>
    <script src="../assets/plugins/datatable/js/buttons.bootstrap5.min.js"></script>
    <script src="../assets/plugins/datatable/js/jszip.min.js"></script>
    <script src="../assets/plugins/datatable/pdfmake/pdfmake.min.js"></script>
    <script src="../assets/plugins/datatable/pdfmake/vfs_fonts.js"></script>
    <script src="../assets/plugins/datatable/js/buttons.html5.min.js"></script>
    <script src="../assets/plugins/datatable/js/buttons.print.min.js"></script>
    <script src="../assets/plugins/datatable/js/buttons.colVis.min.js"></script>
    <script src="../assets/plugins/datatable/dataTables.responsive.min.js"></script>
    <script src="../assets/plugins/datatable/responsive.bootstrap5.min.js"></script>
    <script src="../assets/js/table-data.js"></script>

    <!-- Perfect SCROLLBAR JS-->
    <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll-1.js"></script>

    <!-- SIDE-MENU JS -->
    <script src="../assets/plugins/sidemenu/sidemenu.js"></script>

    <!-- SIDEBAR JS -->
    <script src="../assets/plugins/sidebar/sidebar.js"></script>

    <!-- Color Theme js -->
    <script src="../assets/js/themeColors.js"></script>

    <!-- Sticky js -->
    <script src="../assets/js/sticky.js"></script>

    <!-- CUSTOM JS -->
    <script src="../assets/js/custom.js"></script>

    <!-- Custom-switcher -->
    <script src="../assets/js/custom-swicher.js"></script>

    <!-- Switcher js -->
    <script src="../assets/switcher/js/switcher.js"></script>

   





<script>
  

  // function chargerEtudiants() {
  //   $.ajax({
  //     url: "http://localhost:5001/api/ambassades/mesEtudiants", // ta route pour `listerMesEtudiants`
  //     method: "GET",
  //     headers: {
  //       Authorization: `Bearer ${token}`,
  //     },
  //     success: function (res) {
  //       const etudiants = res.data;

  //     $("#resultats").text(`${etudiants.length} etudiant(s) trouvé(s)`);

  //       const tbody = $("#removecolumns-edit tbody");
  //       tbody.empty();

  //       etudiants.forEach((item, index) => {
  //         const ligne = `
  //           <tr>
  //             <td>${index + 1}</td>
  //             <td>${item.etudiant.nom}</td>
  //             <td>${item.etudiant.email}</td>
  //             <td>${item.estConfirme ? "Validé" : "En attente"}</td>
  //             <td>${item.etudiant.telephone || "-"}</td>
  //             <td>${new Date(item.dateDemande).toLocaleDateString()}</td>
  //             <td>
  //               <button class="btn btn-info btn-sm btn-consulter" data-id="${item.etudiant._id}">Consulter</button>
  //               <button class="btn btn-success btn-sm btn-valider" data-id="${item.etudiant._id}">Valider</button>
  //               <button class="btn btn-danger btn-sm btn-rejeter" data-id="${item.etudiant._id}">Rejeter</button>
  //             </td>
  //           </tr>`;
  //         tbody.append(ligne);
  //       });
  //     },
  //     error: function () {
  //       alert("Erreur lors du chargement des étudiants.");
  //     },
  //   });
  // }
  
  function chargerEtudiants() {
  $.ajax({
    url: "http://localhost:5001/api/ambassades/mesEtudiants",
    method: "GET",
    headers: {
      Authorization: `Bearer ${token}`,
    },
    success: function (res) {
      const etudiants = res.data || [];

      console.log(etudiants)
      const tbody = $("#removecolumns-edit tbody");

      // Affiche le nombre total d'étudiants
      $("#resultats").text(`${etudiants?.length} étudiant(s) trouvé(s)`);

      // Vide le contenu précédent
      tbody.empty();

      // Génère chaque ligne du tableau
      etudiants.forEach((item, index) => {
        const etudiant = item.etudiant;
        const status = item.estConfirme ? "✅ Validé" : "🕓 En attente";
       const telephone = etudiant.telephone || "-";
        const dateInscription = new Date(item.dateDemande).toLocaleDateString();

        const row = `
          <tr>
            <td>${index + 1}</td>
            <td>${etudiant?.nom}</td>
            <td>${etudiant?.email}</td>
            <td>${status}</td>
            <td>${telephone}</td>
            <td>${dateInscription}</td>
            <td>
              <a href="consulterDetailEtudiant.html" class="btn btn-info btn-sm btn-consulter" data-id="${etudiant._id}">
                Consulter
              </a>
              <button class="btn btn-success btn-sm btn-valider" data-id="${etudiant._id}">
                Valider
              </button>
              <button class="btn btn-danger btn-sm btn-rejeter" data-id="${etudiant._id}">
                Rejeter
              </button>
            </td>
          </tr>
        `;

        tbody.append(row);
      });
    },
    error: function () {
      alert("❌ Erreur lors du chargement des étudiants.");
    },
  });
}
  function chargerEtudiantsRejete() {
  $.ajax({
    url: "http://localhost:5001/api/ambassades/etudiantsRejetes",
    method: "GET",
    headers: {
      Authorization: `Bearer ${token}`,
    },
    success: function (res) {
      const etudiants = res.data || [];

      console.log('k,knk',res.data[0].nom)
      const tbody = $("#etudiantRejeteTable tbody");

      // Affiche le nombre total d'étudiants
      $("#resultatsEtudiantsRejete").text(`${etudiants?.length} étudiant(s) trouvé(s)`);

      // Vide le contenu précédent
      tbody.empty();

      // Génère chaque ligne du tableau
      etudiants.forEach((item, index) => {
        const etudiant = item?.data?.etudiant;
        const status = item?.estConfirme ? "✅ Validé" : "🕓 En attente";
       const telephone = etudiant?.telephone || "-";
        const dateInscription = new Date(item.dateDemande).toLocaleDateString();

        const row = `
          <tr>
            <td>${index + 1}</td>
            <td>${etudiant?.nom}</td>
            <td>${etudiant?.email}</td>
            <td>${status}</td>
            <td>${telephone}</td>
            
             
          </tr>
        `;

        tbody.append(row);
      });
    },
    error: function () {
      alert("❌ Erreur lors du chargement des étudiants.");
    },
  });
}

 
  function mettreAJourConfirmation(id, action) {
  $.ajax({
    url: `http://localhost:5001/api/ambassades/traiterDemandeInscription/${id}`,
    method: "PATCH",
    headers: {
      Authorization: `Bearer ${token}`,
      "Content-Type": "application/json",
    },
    data: JSON.stringify({ action }),
    success: function () {
      alert(`Étudiant ${action === "accepter" ? "validé" : "rejeté"} avec succès.`);
      chargerEtudiants(); // Recharge la liste
      chargerEtudiantsRejete()
    },
    error: function (xhr) {
      const msg = xhr.responseJSON?.message || "Erreur lors de la mise à jour.";
      alert(msg);
    },
  });
}

$(document).ready(function () {
  chargerEtudiants();
  chargerEtudiantsRejete()

  // ✅ Bouton Valider
  $(document).on("click", ".btn-valider", function () {
    const id = $(this).data("id");
    mettreAJourConfirmation(id, "accepter");
  });

  // ✅ Bouton Rejeter avec confirmation
  $(document).on("click", ".btn-rejeter", function () {
    const id = $(this).data("id");
    if (confirm("Confirmez-vous le rejet de cet étudiant ?")) {
      mettreAJourConfirmation(id, "refuser");
    }
  });

  // ✅ Bouton Consulter (modale ou autre)
  $(document).on("click", ".btn-consulter", function () {
    const id = $(this).data("id");
    consulterEtudiant(id); // Appelle la fonction qui ouvre la modale
  });
});








  // $(document).ready(function () {
  //   chargerEtudiants();

  //   $(document).on("click", ".btn-valider", function () {
  //     const id = $(this).data("id");
  //     mettreAJourConfirmation(id, 'accepter');
  //   });

  //   $(document).on("click", ".btn-rejeter", function () {
  //     const id = $(this).data("id");
  //     if (confirm("Confirmez-vous le rejet de cet étudiant ?")) {
  //       mettreAJourConfirmation(id, 'refuser');
  //     }
  //   });

  //   $(document).on("click", ".btn-consulter", function () {
  //     const id = $(this).data("id");
  //     // Ex. : ouvrir une modale et charger les infos
  //     alert(`Afficher les infos de l'étudiant ID: ${id}`);
  //   });
  // });
</script>




    </script>

    <!-- Modal Consultation -->
    <div
      class="modal fade"
      id="viewModal"
      tabindex="-1"
      aria-labelledby="viewModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="viewModalLabel">
              Détails de l'annonce
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p><strong>Titre :</strong> <span id="viewTitre"></span></p>
            <p><strong>Type :</strong> <span id="viewType"></span></p>
            <p><strong>Status :</strong> <span id="viewStatus"></span></p>
            <p>
              <strong>Date de publication :</strong> <span id="viewDate"></span>
            </p>
            <p>
              <strong>Description :</strong> <span id="viewDescription"></span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Modification -->
    <div
      class="modal fade"
      id="editModal"
      tabindex="-1"
      aria-labelledby="editModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <form id="editForm">
            <div class="modal-header">
              <h5 class="modal-title" id="editModalLabel">
                Modifier l'annonce
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              <input type="hidden" id="editId" />
              <div class="mb-3">
                <label for="editTitre" class="form-label">Titre</label>
                <input type="text" class="form-control" id="editTitre" />
              </div>
              <div class="mb-3">
                <label for="editType" class="form-label">Type</label>
                <input type="text" class="form-control" id="editType" />
              </div>
              <div class="mb-3">
                <label for="editStatus" class="form-label">Status</label>
                <select id="editStatus" class="form-select">
                  <option value="publié">Publié</option>
                  <option value="brouillon">Brouillon</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="editDescription" class="form-label"
                  >Description</label
                >
                <textarea class="form-control" id="editDescription"></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Enregistrer</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>

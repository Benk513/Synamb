<script>
    const token = localStorage.getItem("token");
    const role= localStorage.getItem("role")
    if (!token) {
      window.location.href = "/frontend/sash/html/login.html"; // Redirige vers login
    }
 
  </script>
<!doctype html>
<html lang="en" dir="ltr">

<head>

    <!-- META DATA -->
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sash – Bootstrap 5  Admin & Dashboard Template">
    <meta name="author" content="Spruko Technologies Private Limited">
    <meta name="keywords" content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit.">

    <!-- FAVICON -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/brand/favicon.ico">

    <!-- TITLE -->
    <title>Sash – Bootstrap 5 Admin & Dashboard Template</title>

    <!-- BOOTSTRAP CSS -->
    <link id="style" href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- STYLE CSS -->
     <link href="../assets/css/style.css" rel="stylesheet">

	<!-- Plugins CSS -->
    <link href="../assets/css/plugins.css" rel="stylesheet">

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet">

    <!-- INTERNAL Switcher css -->
    <link href="../assets/switcher/css/switcher.css" rel="stylesheet">
    <link href="../assets/switcher/demo.css" rel="stylesheet">

</head>

<body class="app sidebar-mini ltr light-mode">

    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
        <img src="../assets/images/loader.svg" class="loader-img" alt="Loader">
    </div>
    <!-- /GLOBAL-LOADER -->

    <!-- PAGE -->
    <div class="page">
        <div class="page-main">

            <!-- app-Header -->
            <div class="app-header header sticky">
                <div class="container-fluid main-container">
                    <div class="d-flex">
                        <a aria-label="Hide Sidebar" class="app-sidebar__toggle" data-bs-toggle="sidebar" href="javascript:void(0)"></a>
                        <!-- sidebar-toggle-->
                        <a class="logo-horizontal " href="index.html">
                            <img src="../assets/images/brand/logo-white.png" class="header-brand-img desktop-logo" alt="logo">
                            <img src="../assets/images/brand/logo-dark.png" class="header-brand-img light-logo1"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                        <div class="main-header-center ms-3 d-none d-lg-block">
                            <input type="text" class="form-control" id="typehead" placeholder="Search for results...">
                            <button class="btn px-0 pt-2"><i class="fe fe-search" aria-hidden="true"></i></button>
                        </div>
                        <div class="d-flex order-lg-2 ms-auto header-right-icons">
                            <!-- SEARCH -->
                            <button class="navbar-toggler navresponsive-toggler d-lg-none ms-auto" type="button"
                                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent-4"
                                aria-controls="navbarSupportedContent-4" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon fe fe-more-vertical"></span>
                            </button>
                            <div class="navbar navbar-collapse responsive-navbar p-0">
                                <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                                    <div class="d-flex order-lg-2">
                                        <div class="dropdown d-lg-none d-flex">
                                            <a href="javascript:void(0)" class="nav-link icon" data-bs-toggle="dropdown">
                                                <i class="fe fe-search"></i>
                                            </a>
                                            <div class="dropdown-menu header-search dropdown-menu-start">
                                                <div class="input-group w-100 p-2">
                                                    <input type="text" class="form-control" placeholder="Search....">
                                                    <div class="input-group-text btn btn-primary">
                                                        <i class="fa fa-search" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                  
                                       
                                        <!-- Theme-Layout -->
                                      
                                        
                                        <!-- FULL-SCREEN -->
                                        <div class="dropdown  d-flex notifications">
                                            <a class="nav-link icon" data-bs-toggle="dropdown"><i
                                                    class="fe fe-bell"></i><span class=" pulse"></span>
                                            </a>
                                             
                                        </div>                                     
                                      
                                        <!-- SIDE-MENU -->
                                        <div class="dropdown d-flex profile-1">
                                            <a href="javascript:void(0)" data-bs-toggle="dropdown" class="nav-link leading-none d-flex">
                                                <img src="../assets/images/users/21.jpg" id="photo" alt="profile-user"
                                                    class="avatar  profile-user brround cover-image">
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                                <div class="drop-heading">
                                                    <div class="text-center">
                                                        <h5 class="text-dark mb-0 fs-14 fw-semibold nom"></h5>
                                                        <small class="text-muted role" >   </small>
                                                    </div>
                                                </div>
                                                <div class="dropdown-divider m-0"></div>
                                                <a class="dropdown-item" href="profile.html">
                                                    <i class="dropdown-icon fe fe-user"></i> Profile
                                                </a>
                                                
                                                <a class="dropdown-item" href="login.html">
                                                    <i class="dropdown-icon fe fe-alert-circle"></i> Se deconnecter
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /app-Header -->

            <!--APP-SIDEBAR-->
            <div class="sticky">
                <div class="app-sidebar__overlay" data-bs-toggle="sidebar"></div>
                <div class="app-sidebar">
                    <div class="side-header">
                        <a class="header-brand1" href="index.html">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img desktop-logo img-fluid" alt="logo" style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img toggle-logo img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo img-fluid" alt="logo"  style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo1 img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                    </div>
                    <div class="main-sidemenu">
                        <div class="slide-left disabled" id="slide-left"><svg xmlns="http://www.w3.org/2000/svg"
                                fill="#7b8191" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" />
                            </svg></div>
                        <ul class="side-menu">
                            <li class="sub-category">
                                <h3>Main</h3>
                            </li>
                            <li class="slide">
                                <a class="side-menu__item has-link" data-bs-toggle="slide" href="index.html"><i
                                        class="side-menu__icon fe fe-home"></i><span
                                        class="side-menu__label">Accueil</span></a>
                            </li>
                            <li class="sub-category">
                                <h3>UI Kit</h3>
                            </li>
                           
                            <li class="sub-category">
                                <h3>Pre-build Pages</h3>
                            </li>
                          
                            <li class="sub-category">
                                <h3>Misc Pages</h3>
                            </li>
                            
                            <li class="sub-category">
                                <h3>General</h3>
                            </li>
                            
                           
                        </ul>
                        <div class="slide-right" id="slide-right"><svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191"
                                width="24" height="24" viewBox="0 0 24 24">
                                <path d="M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z" />
                            </svg></div>
                    </div>
                </div>
            </div>
            <!--/APP-SIDEBAR-->

            <!--app-content open-->
            <div class="main-content app-content mt-0">
                <div class="side-app">

                    <!-- CONTAINER -->
                    <div class="main-container container-fluid">

                        <!-- PAGE-HEADER -->
                        <div class="page-header">
                            <h1 class="page-title">Profile</h1>
                            <div>
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="javascript:void(0)">Pages</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Profile</li>
                                </ol>
                            </div>
                        </div>
                        <!-- PAGE-HEADER END -->

                        <!-- ROW-1 OPEN -->
                        <div class="row" id="user-profile">
                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="wideget-user mb-2">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12">
                                                    <div class="row">
                                                        <div class="panel profile-cover">
                                                            <div class="profile-cover__action "></div>
                                                            <div class="profile-cover__img">
                                                                <div class="profile-img-1">
                                                                    <img src="../assets/images/users/avatar.jpg" alt="img" class="photo">
                                                                </div>
                                                                <div class="profile-img-content text-dark text-start">
                                                                    <div class="text-dark">
                                                                        <h3 class="h3 mb-2 nom"   >...</h3>
                                                                        <h3 id="role"></h3>
                                                                        <h5 class="text-muted role"  ></h5>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                             
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="px-0 px-sm-4">
                                                            <div class="social social-profile-buttons mt-5 float-end">
                                                                <div class="mt-3">
                                                                    <a class="social-icon text-primary" href="https://www.youtube.com/" target="_blank"><i class="fa fa-youtube"></i></a>
                                                                    <a class="social-icon text-primary" href="javascript:void(0)"><i class="fa fa-rss"></i></a>
                                                                    <a class="social-icon text-primary" href="https://www.linkedin.com/" target="_blank"><i class="fa fa-linkedin"></i></a>
                                                                    <a class="social-icon text-primary" href="https://myaccount.google.com/" target="_blank"><i class="fa fa-google-plus"></i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-4">
                                       
                                        <div class="card">
                                            <div class="card-header">
                                                <div class="card-title">Information Personnel</div>
                                            </div>
                                            <div class="card-body">
                                                <div>
                                                    <h5>Biography<i class="fe fe-edit-3 text-primary mx-2"></i></h5>
                                                    <p id="biographie">...
                                                         
                                                    </p>
                                                </div>
                                                <hr>
                                                <div class="d-flex align-items-center mb-3 mt-3">
                                                    <div class="me-4 text-center text-primary">
                                                        <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                        <strong>Nom et Prenom: </strong>
                                                    </div>
                                                    <div>
                                                        <strong class="nom">... </strong>
                                                    </div>
                                                </div>
                                              
                                                <div class="d-flex align-items-center mb-3 mt-3">
                                                    <div class="me-4 text-center text-primary">
                                                        <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                        <strong>Date de naissance : </strong>
                                                    </div>
                                                    <div>
                                                        <strong id="dateNaissance">...  </strong>
                                                    </div>
                                                </div>
                                                <div class="d-flex align-items-center mb-3 mt-3">
                                                    <div class="me-4 text-center text-primary">
                                                        <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                        <strong>Numero de telephone : </strong>
                                                    </div>
                                                    <div>
                                                        <strong id="telephone">... </strong>
                                                    </div>
                                                </div>
                                                <div class="d-flex align-items-center mb-3 mt-3">
                                                    <div class="me-4 text-center text-primary">
                                                        <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                        <strong>Adresse  : </strong>
                                                    </div>
                                                    <div>
                                                        <strong id="adresse">...</strong>
                                                    </div>
                                                </div>
                                                <div class="d-flex align-items-center mb-3 mt-3">
                                                    <div class="me-4 text-center text-primary">
                                                        <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                        <strong>Sexe : </strong>
                                                    </div>
                                                    <div>
                                                        <strong id="sexe">...</strong>
                                                    </div>
                                                </div>                                             

                                            </div>
                                        </div>
                                           
                                           
                                       
                                    </div>
                                    <div class="col-xl-8">
                                
<!-- Information Administrative -->
                                        <div class="card" id="info-administrative">
                                            <div class="card-header">
                                                <div class="card-title">Information Administrative</div>
                                                 
                                            </div>
                                            <div class="card-body">                                          
                                                <div class="row">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Date d'entrée en Tunisie : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>San Francisco, CA </strong>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Nombre de visas : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>San Francisco, CA </strong>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Derniere date titre de sejour : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>San Francisco, CA </strong>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Ambassade : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>San Francisco, CA </strong>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Numero de passeport : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>OP1152114</strong>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-3 mt-3">
                                                            <div class="me-4 text-center text-primary">
                                                                <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                <strong>Numero de titre de sejour : </strong>
                                                            </div>
                                                            <div>
                                                                <strong>3546541153 </strong>
                                                            </div>
                                                        </div>                                                        
                                                        </div>                                                                                                     
                                                    </div>
                                                </div>                                       
                                            </div>



                                            <div class="card" id="info-academique">
                                                <div class="card-header">
                                                    <div class="card-title">Information Academique</div>
                                                </div>
                                                <div class="card-body">                                                 
    
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="d-flex align-items-center mb-3 mt-3">
                                                                <div class="me-4 text-center text-primary">
                                                                    <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                    <strong>Niveau d'etude : </strong>
                                                                </div>
                                                                <div>
                                                                    <strong> Licence </strong>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex align-items-center mb-3 mt-3">
                                                                <div class="me-4 text-center text-primary">
                                                                    <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                    <strong>Domaine : </strong>
                                                                </div>
                                                                <div>
                                                                    <strong>Informatique </strong>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex align-items-center mb-3 mt-3">
                                                                <div class="me-4 text-center text-primary">
                                                                    <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                    <strong>Etablissement : </strong>
                                                                </div>
                                                                <div>
                                                                    <strong>Polytech </strong>
                                                                </div>
                                                            </div>
                                                        </div>
    
                                                        <div class="col-6">
                                                            <div class="d-flex align-items-center mb-3 mt-3">
                                                                <div class="me-4 text-center text-primary">
                                                                    <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                    <strong>Diplome Obtenu : </strong>
                                                                </div>
                                                                <div>
                                                                    <strong>Diplome Nationale de Licence </strong>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex align-items-center mb-3 mt-3">
                                                                <div class="me-4 text-center text-primary">
                                                                    <!-- <span><i class="fe fe-briefcase fs-20"></i></span> -->
                                                                    <strong>Aneée d'obtention : </strong>
                                                                </div>
                                                                <div>
                                                                    <strong>2022 </strong>
                                                                </div>
                                                            </div>
                                                                                                                  
                                                            </div>                                                                                                     
                                                        </div>
                                                    </div>                                       
                                                </div>
                                            </div>
                                        </div>
  
                                      
                                   
                                </div>
                            </div>
                            <!-- COL-END -->
                        </div>
                        <!-- ROW-1 CLOSED -->

                    </div>
                    <!-- CONTAINER CLOSED -->

                </div>
            </div>
            <!--app-content closed-->
        </div>

        

   

     
   
    </div>

    <!-- BACK-TO-TOP -->
    <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

    <!-- JQUERY JS -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- BOOTSTRAP JS -->
    <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
    <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- INPUT MASK JS-->
    <script src="../assets/plugins/input-mask/jquery.mask.min.js"></script>

	<!-- TypeHead js -->
	<script src="../assets/plugins/bootstrap5-typehead/autocomplete.js"></script>
    <script src="../assets/js/typehead.js"></script>

    <!-- Perfect SCROLLBAR JS-->
    <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll-1.js"></script>

    <!-- SIDE-MENU JS -->
    <script src="../assets/plugins/sidemenu/sidemenu.js"></script>

    <!-- SIDEBAR JS -->
    <script src="../assets/plugins/sidebar/sidebar.js"></script>

    <!-- Color Theme js -->
    <script src="../assets/js/themeColors.js"></script>

    <!-- Sticky js -->
    <script src="../assets/js/sticky.js"></script>

    <!-- CUSTOM JS -->
    <script src="../assets/js/custom.js"></script>

    <!-- Custom-switcher -->
    <script src="../assets/js/custom-swicher.js"></script>

    <!-- Switcher js -->
    <script src="../assets/switcher/js/switcher.js"></script>


    <script>
        $(".deconnexion").click(function () {
  alert("À bientôt !");
  localStorage.clear();
  window.location.href = "login.html";
});
    </script>
    <script>

        $(document).ready(function () {
            // Charger les données du profil

            const userProfileUrl = "http://localhost:5001/uploads/utilisateurs/";

        $.ajax({
          url: "http://localhost:5001/api/utilisateurs/monProfil",
          method: "GET",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("token"),
          },
          success: function (user) {
              const profileUrl = userProfileUrl + user?.data.photo;
            console.log(user?.data.nom)
            $(".nom").text(user?.data?.nom);
            $("#email").text(user?.data.email);
            $("#lipasa").text(user?.data.lipasa || "Non renseigné.");
            $(".photo").attr("src", profileUrl);
            $("#photo").attr("src", profileUrl);
            $("#pays").text(user?.data.pays || "Non renseigné.");
            $("#dateNaissance").text(user?.data.dateNaissance || "Non renseigné.");
            $("#biographie").text(user?.data.biographie || "Aucune biographie fournie.");
            $("#adresse").text(user?.data.adresse || "Non renseigné.");
            $("#codePays").val(user?.data.codePays || "Non renseigné.");
            $("#telephone").text(user?.data.telephone || "Non renseignné.");
            $(".role").text(user?.data.role || "Non renseignné.");
            $("#sexe").text(user?.data.sexe || "Non renseignné.");


                 // Affichage conditionnel
      if (user?.data.role === "admin" || user?.data.role === "ambassadeur") {
        $("#info-administrative").hide();     // Masquer mot de passe
        $("#info-academique").hide();     // Masquer mot de passe
        $("#saveBtn").hide();         // Masquer bouton "Enregistrer"
      }
          },
          error: function () {
              console.log("Erreur lors du chargement du profil !");
            },
        });})
        </script>

</body>

</html>
<script>
    const token = localStorage.getItem("token");
    const role= localStorage.getItem("role")
    if (!token) {
      window.location.href = "/frontend/sash/html/login.html"; // Redirige vers login
    }
 
  </script>
<!doctype html>
<html lang="en" dir="ltr">

<head>

    <!-- META DATA -->
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sash – Bootstrap 5  Admin & Dashboard Template">
    <meta name="author" content="Spruko Technologies Private Limited">
    <meta name="keywords" content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit.">

    <!-- FAVICON -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/brand/favicon.ico">

    <!-- TITLE -->
    <title>SYNAMB</title>

    <!-- BOOTSTRAP CSS -->
    <link id="style" href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- STYLE CSS -->
     <link href="../assets/css/style.css" rel="stylesheet">

	<!-- Plugins CSS -->
    <link href="../assets/css/plugins.css" rel="stylesheet">

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet">

    <!-- INTERNAL Switcher css -->
    <link href="../assets/switcher/css/switcher.css" rel="stylesheet">
    <link href="../assets/switcher/demo.css" rel="stylesheet">

</head>

<body class="app sidebar-mini ltr light-mode">

    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
        <img src="../assets/images/loader.svg" class="loader-img" alt="Loader">
    </div>
    <!-- /GLOBAL-LOADER -->

    <!-- PAGE -->
    <div class="page">
        <div class="page-main">

            <!-- app-Header -->
            <div class="app-header header sticky">
                <div class="container-fluid main-container">
                    <div class="d-flex">
                        <a aria-label="Hide Sidebar" class="app-sidebar__toggle" data-bs-toggle="sidebar" href="javascript:void(0)"></a>
                        <!-- sidebar-toggle-->
                        <a class="logo-horizontal " href="index.html">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img desktop-logo" alt="logo">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo1"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                        
                        <div class="d-flex order-lg-2 ms-auto header-right-icons">
                            <!-- SEARCH -->
                            <button class="navbar-toggler navresponsive-toggler d-lg-none ms-auto" type="button"
                                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent-4"
                                aria-controls="navbarSupportedContent-4" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon fe fe-more-vertical"></span>
                            </button>
                            <div class="navbar navbar-collapse responsive-navbar p-0">
                                <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                                    <div class="d-flex order-lg-2">
                                        <div class="dropdown d-lg-none d-flex">
                                            <a href="javascript:void(0)" class="nav-link icon" data-bs-toggle="dropdown">
                                                <i class="fe fe-search"></i>
                                            </a>
                                            <div class="dropdown-menu header-search dropdown-menu-start">
                                                <div class="input-group w-100 p-2">
                                                    <input type="text" class="form-control" placeholder="Search....">
                                                    <div class="input-group-text btn btn-primary">
                                                        <i class="fa fa-search" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                         
                                        <!-- Theme-Layout -->
                                        <div class="dropdown  d-flex shopping-cart">
                                             
                                          
                                        </div>
                                      
                                       
                                        <!-- NOTIFICATIONS -->
                                       
                                     
                                        <!-- SIDE-MENU -->
                                        <div class="dropdown d-flex profile-1">
                                            <a href="javascript:void(0)" data-bs-toggle="dropdown" class="nav-link leading-none d-flex">
                                                <img src="../assets/images/users/21.jpg" id="photo" alt="profile-user"
                                                    class="avatar  profile-user brround cover-image">
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                            
                                                <div class="dropdown-divider m-0"></div>
                                                <a class="dropdown-item" href="profile.html">
                                                    <i class="dropdown-icon fe fe-user"></i> Profile
                                                </a>
                                               
                                              
                                                <button class=" dropdown-item text-dark   btn deconnexion"  ><i
                                                    class="side-menu__icon fa fa-sign-out "></i><span
                                                    class="side-menu__label"  >Se deconnecter</span> </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /app-Header -->

            <!--APP-SIDEBAR-->
            <div class="sticky">
                <div class="app-sidebar__overlay" data-bs-toggle="sidebar"></div>
                <div class="app-sidebar">
                    <div class="side-header">
                        <a class="header-brand1" href="index.html">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img desktop-logo img-fluid" alt="logo" style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img toggle-logo img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo img-fluid" alt="logo"  style="max-width: 50%;
    height: auto;">
                            <img src="../assets/images/brand/synamb.png" class="header-brand-img light-logo1 img-fluid"  style="max-width: 50%;
    height: auto;"
                                alt="logo">
                        </a>
                        <!-- LOGO -->
                    </div>
                    <div class="main-sidemenu">
                        <div class="slide-left disabled" id="slide-left"><svg xmlns="http://www.w3.org/2000/svg"
                                fill="#7b8191" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" />
                            </svg></div>
                        <ul class="side-menu">
                            <li class="sub-category">
                                <h3>PRINCIPALE</h3>
                            </li>
                            <li class="slide">
                                <a class="side-menu__item has-link" data-bs-toggle="slide" href="index.html"> <span
                                        class="side-menu__label">Tableau de bord</span></a>
                            </li>
                           
                           
                            <li class="sub-category">
                                <h3>Ambassades</h3>
                            </li>
                            <li>
                                <a class="side-menu__item has-link" href="ambassades.html" > <span
                                        class="side-menu__label">Liste des ambassades</span> </a>
                            </li>
                            
                            
                            <li class="sub-category">
                                <h3>Ambassadeurs</h3>
                            </li>
                            <li>
                                <a class="side-menu__item has-link" href="ajouter-ambassadeur.html" > <span
                                        class="side-menu__label">Ajouter un ambassadeur</span> </a>
                            </li>
                            
                            <li>
                                <a class="side-menu__item has-link" href="liste_ambassadeurs.html" > <span
                                        class="side-menu__label">Liste des ambassadeurs</span> </a>
                            </li>
                            
                           
                            <li class="sub-category">
                                <h3>General</h3>
                            </li>
                          
                              
                            <li class="deconnexion">
                                <button class=" text-dark   btn"    > <span
                                        class="side-menu__label">Se deconnecter</span> </button>
                            </li>
                            
                          
                        </ul>
                        <div class="slide-right" id="slide-right"><svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191"
                                width="24" height="24" viewBox="0 0 24 24">
                                <path d="M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z" />
                            </svg></div>
                    </div>
                </div>
            </div>
            <!--/APP-SIDEBAR-->

            <!--app-content open-->
            <div class="main-content app-content mt-0">
                <div class="side-app">

                    <!-- CONTAINER -->
                    <div class="main-container container-fluid">

                        <!-- PAGE-HEADER -->
                        <div class="page-header">
                            <h1 class="page-title">Ajout d'un ambassadeur</h1>
                            <div>
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="javascript:void(0)">Ambassadeur</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Ajout</li>
                                </ol>
                            </div>
                        </div>
                        <!-- PAGE-HEADER END -->

                        <!-- Row -->
                        <div class="row">
                            
                            <div class="col-md-12 col-xl-8">

                                <div id="message"></div>
                                <form id="ajouterAmbassadeur" class="card">
                                    <div class="card-header">
                                        <h4 class="card-title">Ajouter un Ambassadeur</h4>
                                    </div>
                                    <div class="card-body">
                                        <form class="form-horizontal">
                                            <div class=" row mb-4">
                                                <label for="inputName" class="col-md-3 form-label">Nom et Prenom  </label>
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" id="nom" placeholder="Inserez le nom " autocomplete="username">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputEmail3" class="col-md-3 form-label">Adresse Email</label>
                                                <div class="col-md-9">
                                                    <input type="email" class="form-control" id="email" placeholder="Inserez l'email " autocomplete="username">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputEmail3" class="col-md-3 form-label">Pays</label>
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" id="pays" placeholder="Congolaise" autocomplete="username">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputPassword3" class="col-md-3 form-label">Mot de passe</label>
                                                <div class="col-md-9">
                                                    <input type="password" class="form-control" id="motDePasse" placeholder="mot de passe" autocomplete="new-password">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputPassword3" class="col-md-3 form-label">Confirmation Mot de passe</label>
                                                <div class="col-md-9">
                                                    <input type="password" class="form-control" id="confirmationMotDePasse" placeholder="mot de passe" autocomplete="new-password">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputPassword3" class="col-md-3 form-label">Numero de passeport</label>
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" id="lipasa" placeholder="OP1152..." autocomplete="new-password">
                                                </div>
                                            </div>
                                            <div class=" row mb-4">
                                                <label for="inputPassword3" class="col-md-3 form-label">Code Pays</label>
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" id="codePays" placeholder="CD, TN.." autocomplete="new-password">
                                                </div>
                                            </div>
                                            <!-- <div class="mb-0 row justify-content-end">
                                                <div class="col-md-9">
                                                    <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="example-checkbox2" value="option2">
                                                            <span class="custom-control-label">Check me Out</span>
                                                        </label>
                                                </div>
                                            </div> -->
                                            <div class="mb-0 mt-4 row justify-content-end">
                                                <div class="col-md-9">
                                                    <button type="submit" class="btn btn-primary">Ajouter</button>
                                                    <button type="reset" class="btn btn-secondary">Annuler</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- End Row -->                       
                    <!-- CONTAINER CLOSED -->

                </div>
            </div>
            <!--app-content closed-->
        </div>

        <!-- Sidebar-right -->
        <div class="sidebar sidebar-right sidebar-animate">
            <div class="panel panel-primary card mb-0 shadow-none border-0">
                <div class="tab-menu-heading border-0 d-flex p-3">
                    <div class="card-title mb-0"><i class="fe fe-bell me-2"></i><span
                            class=" pulse"></span>Notifications</div>
                    <div class="card-options ms-auto">
                        <a href="javascript:void(0);" class="sidebar-icon text-end float-end me-3 mb-1"
                            data-bs-toggle="sidebar-right" data-target=".sidebar-right"><i
                                class="fe fe-x text-white"></i></a>
                    </div>
                </div>
                
            </div>
        </div>
        <!--/Sidebar-right-->

        <!-- Country-selector modal-->
        <div class="modal fade" id="country-selector">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content country-select-modal">
                    <div class="modal-header">
                        <h6 class="modal-title">Choose Country</h6><button aria-label="Close" class="btn-close"
                            data-bs-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>
                    </div>
                    <div class="modal-body">
                        <ul class="row p-3">
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block active">
                                    <span class="country-selector"><img alt="" src="../assets/images/flags-img/us_flag.jpg"
                                            class="me-3 language"></span>USA
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/italy_flag.jpg"
                                        class="me-3 language"></span>Italy
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/spain_flag.jpg"
                                        class="me-3 language"></span>Spain
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/india_flag.jpg"
                                        class="me-3 language"></span>India
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/french_flag.jpg"
                                        class="me-3 language"></span>French
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/russia_flag.jpg"
                                        class="me-3 language"></span>Russia
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/germany_flag.jpg"
                                        class="me-3 language"></span>Germany
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt=""
                                        src="../assets/images/flags-img/argentina.jpg"
                                        class="me-3 language"></span>Argentina
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt="" src="../assets/images/flags-img/malaysia.jpg"
                                        class="me-3 language"></span>Malaysia
                                </a>
                            </li>
                            <li class="col-lg-6 mb-2">
                                <a href="javascript:void(0)" class="btn btn-country btn-lg btn-block">
                                    <span class="country-selector"><img alt="" src="../assets/images/flags-img/turkey.jpg"
                                        class="me-3 language"></span>Turkey
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Country-selector modal-->

        <!-- FOOTER -->
        <footer class="footer">
            <div class="container">
                <div class="row align-items-center flex-row-reverse">
                    <div class="col-md-12 col-sm-12 text-center">
                        Copyright © <span id="year"></span> <a href="javascript:void(0)">Sash</a>. Designed with <span class="fa fa-heart text-danger"></span> by <a href="javascript:void(0)"> Spruko </a> All rights reserved.
                    </div>
                </div>
            </div>
        </footer>
        <!-- FOOTER END -->
    </div>

    <!-- BACK-TO-TOP -->
    <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

    <!-- JQUERY JS -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- BOOTSTRAP JS -->
    <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
    <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- INPUT MASK JS-->
    <script src="../assets/plugins/input-mask/jquery.mask.min.js"></script>

	<!-- TypeHead js -->
	<script src="../assets/plugins/bootstrap5-typehead/autocomplete.js"></script>
    <script src="../assets/js/typehead.js"></script>

    <!-- INTERNAL SELECT2 JS -->
    <script src="../assets/plugins/select2/select2.full.min.js"></script>

    <!-- Perfect SCROLLBAR JS-->
    <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll.js"></script>
    <script src="../assets/plugins/p-scroll/pscroll-1.js"></script>

    <!-- SIDE-MENU JS -->
    <script src="../assets/plugins/sidemenu/sidemenu.js"></script>

    <!-- SIDEBAR JS -->
    <script src="../assets/plugins/sidebar/sidebar.js"></script>

    <!-- Color Theme js -->
    <script src="../assets/js/themeColors.js"></script>

    <!-- Sticky js -->
    <script src="../assets/js/sticky.js"></script>
    <script src="../assets/js/select2.js"></script>

    <!-- CUSTOM JS -->
    <script src="../assets/js/custom.js"></script>

    <!-- Custom-switcher -->
    <script src="../assets/js/custom-swicher.js"></script>

    <!-- Switcher js -->
    <script src="../assets/switcher/js/switcher.js"></script>

    
    <script>
        $(".deconnexion").click(function () {
          alert("À bientôt !");
          localStorage.clear();
          window.location.href = "login.html";
        });
            </script>
   <script>
 


        
$(document).ready(function () {
            // Charger les données du profil

            const userProfileUrl = "http://localhost:5001/uploads/utilisateurs/";

        $.ajax({
          url: "http://localhost:5001/api/utilisateurs/monProfil",
          method: "GET",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("token"),
          },
          success: function (user) {
              const profileUrl = userProfileUrl + user?.data.photo;
            console.log(user?.data.nom)
            $("#nom").text(user?.data?.nom);
            $("#email").text(user?.data.email);
            $("#lipasa").text(user?.data.lipasa || "Non renseigné.");
            $("#photo").attr("src", profileUrl);
            $("#pays").text(user?.data.pays || "Non renseigné.");
            $("#dateNaissance").text(user?.data.dateNaissance || "Non renseigné.");
            $("#biographie").text(user?.data.biographie || "Aucune biographie fournie.");
            $("#adresse").text(user?.data.adresse || "Non renseigné.");
            $("#codePays").val(user?.data.codePays || "Non renseigné.");
            $("#telephone").text(user?.data.telephone || "Non renseignné.");
            $("#role").text(user?.data.role || "Non renseignné.");


                 // Affichage conditionnel
      if (user?.data.role === "admin") {
        $("#info-administrative").hide();     // Masquer mot de passe
        $("#info-academique").hide();     // Masquer mot de passe
        $("#saveBtn").hide();         // Masquer bouton "Enregistrer"
      }
          },
          error: function () {
              alert("Erreur lors du chargement du profil !");
                    }
                });
            });
        </script>

    <script>
        $("#ajouterAmbassadeur").submit(function (e) {
          e.preventDefault();
  
          $("#spinner").show(); // 👉 Affiche le spinner
          $("#message").html(""); // Vide les messages
  
          const data = {
            nom: $("#nom").val(),
            email: $("#email").val(),
            motDePasse: $("#motDePasse").val(),
            confirmationMotDePasse: $("#confirmationMotDePasse").val(),
            lipasa: $("#lipasa").val(),
            pays: $("#pays").val(),
            codePays: $("#codePays").val(),
          };
  
          $.ajax({
            url: "http://localhost:5001/api/utilisateurs/inscription",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function (res) {
              $("#spinner").hide();
              $("#message")
                .html(` <div class="alert alert-success alert-dismissible fade show" role="alert">
                                          <span class="alert-inner--icon"><i class="fe fe-thumbs-up"></i></span>
                                          <span class="alert-inner--text"><strong>Succes!</strong>Ambassadeur ajouté avec succès!</span>
                                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                                  <span aria-hidden="true">×</span>
                                              </button>
                                      </div>`);
              setTimeout(() => {
                window.location.href = "login.html"; // 🔁 redirection après 2s
              }, 2000);
            },
            error: function (xhr) {
              $("#spinner").hide();
              const msg = xhr.responseJSON?.message || "Une erreur est survenue";
              $("#message")
                .html(` <div class="alert alert-danger alert-dismissible fade show mb-0" role="alert">
                                                      <span class="alert-inner--icon"><i class="fe fe-slash"></i></span>
                                                      <span class="alert-inner--text"><strong>Erreur!</strong> ${msg}!</span>
                                                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                                              <span aria-hidden="true">×</span>
                                                          </button>
                                                  </div>`);
            },
          });
        });
      </script>

</body>

</html>